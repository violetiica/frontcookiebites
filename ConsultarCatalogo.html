<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>CookieBites</title>
  <link rel="icon" href="img/galletitafavicon.ico" type="/x-icon">
  <link rel="stylesheet" href="style.css">
  <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Dongle&display=swap">
  <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Pacifico&display=swap">
  <link href="https://fonts.googleapis.com/css2?family=Hedvig+Letters+Sans&display=swap" rel="stylesheet">
</head>

<body>
  <header>
    <img id="logo" src="img/CookieBitesSinFondo.png" alt="Logo CookieBites" class="logo">
    <div class="icons">
      <img src="img/usuario.png" alt="usuario" class="usuario">
      <img src="img/carrito.png" alt="Carrito de Pedidos" class="carrito">
    </div>
  </header>
  <main>
    <h1>Hoy quiero una...</h1>
    <div id="catalogo">
    </div>
  </main>
  <footer>
    <p>© CookieBites</p>
  </footer>
</body>



<script>
  // Selecciona el carrito
  const carrito = document.querySelector('.carrito');
  carrito.onclick = function () {
    window.location.href = "InterfazCarritoCliente.html?id=" + "";
  }

  let urlParams = new URLSearchParams(window.location.search);
  let tipoDeUsuario = urlParams.get('perfil');
  let nombreUsuario = urlParams.get('id');
  let listaCatalogo = document.getElementById("catalogo");

  let listaDePrueba = [
    {
      "nombre": "Galleta de Chocolate",
      "precio": 2.5,
      "ingredientes": [
        "Harina",
        "Azúcar",
        "Mantequilla",
        "Cacao",
        "Chispas de chocolate"
      ]
    },
    {
      "nombre": "Galleta de Avena",
      "precio": 2.0,
      "ingredientes": ["Avena", "Harina", "Azúcar", "Mantequilla", "Canela"]
    },
    {
      "nombre": "Galleta de Vainilla",
      "precio": 2.2,
      "ingredientes": ["Harina", "Azúcar", "Mantequilla", "Extracto de vainilla"]
    },
    {
      "nombre": "Galleta de Coco",
      "precio": 2.8,
      "ingredientes": ["Harina", "Azúcar", "Mantequilla", "Coco rallado"]
    },
    {
      "nombre": "Galleta de Almendra",
      "precio": 3.0,
      "ingredientes": ["Harina", "Azúcar", "Mantequilla", "Almendras picadas"]
    },
    {
      "nombre": "Galleta de Miel",
      "precio": 2.7,
      "ingredientes": ["Harina", "Azúcar", "Mantequilla", "Miel"]
    },
    {
      "nombre": "Galleta de Jengibre",
      "precio": 3.2,
      "ingredientes": [
        "Harina",
        "Azúcar moreno",
        "Mantequilla",
        "Jengibre en polvo",
        "Canela"
      ]
    },
    {
      "nombre": "Galleta de Nuez",
      "precio": 3.5,
      "ingredientes": ["Harina", "Azúcar", "Mantequilla", "Nueces picadas"]
    },
    {
      "nombre": "Galleta de Frambuesa",
      "precio": 3.8,
      "ingredientes": [
        "Harina",
        "Azúcar",
        "Mantequilla",
        "Mermelada de frambuesa"
      ]
    },
    {
      "nombre": "Galleta de Café",
      "precio": 3.0,
      "ingredientes": ["Harina", "Azúcar", "Mantequilla", "Café soluble"]
    }
  ]
 
  function llenarListadoProductos(listado) {
    let hijoActual;
    let nombre;
    let imagen;
    let precio;
    for (let producto of listado) {
      hijoActual = document.createElement("div");
      hijoActual.classList.add("producto");
      imagen = document.createElement("img");
      imagen.setAttribute("scr", "img/galletas/galletaslimon.jpg");
      imagen.setAttribute("alt", "imagen producto");
      nombre = document.createElement("h2");
      nombre.textContent = producto.nombre;
      nombre.classList.add("nombre")
      precio = document.createElement("h3")
      precio.textContent = "$" + producto.precio;
      nombre.classList.add("precio");
      hijoActual.appendChild(imagen);
      hijoActual.appendChild(nombre);
      hijoActual.appendChild(precio);
      console.log(hijoActual);
      hijoActual.addEventListener("click", ()=> {
         window.location.href = "ConsultarProducto.html?id=" + producto.nombre;
      });
      listaCatalogo.appendChild(hijoActual);
    }
    }

  function agregarBotonAgregar(){
      if (tipoDeUsuario == "admin"){
        console.log("ejecutado");
        let tarjetaAgregar = document.createElement("div");
        tarjetaAgregar.classList.add("producto", "agregar-producto");
        let iconoMas = document.createElement("span");
        iconoMas.textContent = "+";
        iconoMas.classList.add("icono-mas"); // Para estilos extra si quieres
        let texto = document.createElement("h2");
        texto.textContent = "Agregar nueva galleta";
        texto.classList.add("nombre"); // Igual que los nombres de las otras tarjetas
        tarjetaAgregar.appendChild(iconoMas);
        tarjetaAgregar.appendChild(texto);
        listaCatalogo.appendChild(tarjetaAgregar);
      }


// Acción al hacer clic (puedes cambiar la URL)
// tarjetaAgregar.onclick = function() {
//   window.open('InterfazAdmiNuevaGalleta.html', '_blank');
// };

// listaCatalogo.appendChild(tarjetaAgregar);

    }


  // Selecciona el perfil de usuario
  const usuario = document.querySelector('.usuario');
  usuario.onclick = function () {
    window.location.href = "InterfazUsuario.html.html?id=" +"";
  }


  let productos = document.querySelectorAll('.producto');
  productos.forEach(function(producto,index) {
    producto.onclick = function() {
        let clickedProductData = listaDePrueba[index];
        sessionStorage.setItem('currentProduct', JSON.stringify(clickedProductData));
        window.open('InterfazInfoProductoCliente.html', '_blank');
    };
});

llenarListadoProductos(listaDePrueba);
agregarBotonAgregar();
</script>

</html>